<?xml version="1.0" encoding="UTF-8"?>

<modification>
    <name>Change-MP-Paths</name>
    <version>1.0.0</version>
    <code>All SEF urls</code>        
    <author>Webkul</author>
    <link>http://webkul.com</link>
    
    <file path="catalog/controller/common/seo_url.php">
        <operation>
            <search><![CDATA[$this->request->get['route'] = 'error/not_found';]]></search>
            <add position="before" offset="1"><![CDATA[
                }elseif($this->config->get('marketplace_useseo') AND $this->request->get['_route_']=='Marketplace-Collection'){                  
                    $this->request->get['route'] =  'customerpartner/profile/collection';
                }elseif ($this->config->get('marketplace_useseo') AND is_array($this->config->get('marketplace_SefUrlsvalue')) AND in_array($this->request->get['_route_'],$this->config->get('marketplace_SefUrlsvalue'))) { 
                    $sefKey = array_search($this->request->get['_route_'],$this->config->get('marketplace_SefUrlsvalue'));
                    $wkSefUrlspath = $this->config->get('marketplace_SefUrlspath');
                    if(isset($wkSefUrlspath[$sefKey]))
                        $this->request->get['route'] =  $wkSefUrlspath[$sefKey]; 
            ]]></add>
        </operation>

        <operation>

            <search><![CDATA[} elseif ($key == 'path') {]]></search>
            <add position="before"><![CDATA[    
                }elseif($this->config->get('marketplace_useseo') AND $data['route'] == 'customerpartner/profile/collection'){
                    $url .= '/Marketplace-Collection' ;
                    unset($data[$key]);        
                } elseif ($this->config->get('marketplace_useseo') AND is_array($this->config->get('marketplace_SefUrlspath')) AND in_array($data['route'],$this->config->get('marketplace_SefUrlspath'))) { 
                    $sefKey = array_search($data['route'],$this->config->get('marketplace_SefUrlspath'));
                    $wkSefUrlsvalue = $this->config->get('marketplace_SefUrlsvalue');
                    if(isset($wkSefUrlsvalue[$sefKey])){
                        $url .=  '/'.$wkSefUrlsvalue[$sefKey];       
                        unset($data[$key]);
                    }         
            ]]></add>
        </operation>
    </file>
    
</modification>

